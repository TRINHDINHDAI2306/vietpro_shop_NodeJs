<%-include("../layout/head.ejs", {title: "Edit Product"})%>
<%-include("../layout/header.ejs")%>
<%-include("../layout/sidebar.ejs")%>

		
	<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">			
		<div class="row">
			<ol class="breadcrumb">
                <li><a href="/admin/dashboard"><svg class="glyph stroked home"><use xlink:href="#stroked-home"></use></svg></a></li>
                <li><a href="">Quản lý sản phẩm</a></li>
				<li class="active"><%=product.name%></li>
			</ol>
		</div><!--/.row-->
		
		<div class="row">
			<div class="col-lg-12">
				<h1 class="page-header">Sản phẩm: <%=product.name%></h1>
			</div>
        </div><!--/.row-->
        <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="col-md-6">
                                <form action="/admin/products/update/<%=product._id%>" role="form" method="post" enctype="multipart/form-data">
                                <div class="form-group">
                                    <label>Tên sản phẩm</label>
                                    <input type="text" name="name" required class="form-control" value="<%=product.name%>"  placeholder="">
                                </div>
                                                                
                                <div class="form-group">
                                    <label>Giá sản phẩm</label>
                                    <input type="number" name="price" required value="<%=product.price%>" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Bảo hành</label>
                                    <input type="text" name="warranty" required value="<%=product.warranty%>" class="form-control">
                                </div>    
                                <div class="form-group">
                                    <label>Phụ kiện</label>
                                    <input type="text" name="accessories" required value="<%=product.accessories%>" class="form-control">
                                </div>                  
                                <div class="form-group">
                                    <label>Khuyến mãi</label>
                                    <input type="text" name="promotion" required value="<%=product.promotion%>" class="form-control">
                                </div>  
                                <div class="form-group">
                                    <label>Tình trạng</label>
                                    <input type="text" name="status" required value="<%=product.status%>" type="text" class="form-control">
                                </div>  
                                
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Ảnh sản phẩm</label>
                                    <input type="file" name="thumbnail" onchange="loadFile(event)">
                                    <br>
                                    <div>
                                        <img id="output" width="160" src="../uploads/images/<%=product.thumbnail%>">
                                        <script>
                                        const loadFile =(event) =>{
                                        const output = document.getElementById('output');
                                        output.src = URL.createObjectURL(event.target.files[0]);
                                        output.onload = ()=> {
                                        URL.revokeObjectURL(output.src) // free memory
                                            }
                                        };
                                        </script>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Danh mục</label>
                                    <select name="cat_id" class="form-control">
                                        <%for(let category of categories){%>
                                        <option <%=product.id==product.cat_id ? "selected" : ""%> value=<%=category._id%>><%=category.title%></option>
                                        <%}%>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label>Trạng thái</label>
                                    <select name="is_stock" class="form-control">
                                        <option <%=product.is_stock==1 ? "selected" : ""%> value=1>Còn hàng</option>
	                                    <option <%=product.is_stock==0 ? "selected" : ""%> value=0>Hết hàng</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label>Sản phẩm nổi bật</label>
                                    <div class="checkbox">
                                        <label>
                                            <input <%=product.featured==true ? "checked" : ""%> name="featured" type="checkbox" value=1>Nổi bật
                                        </label>
                                    </div>
                                </div>
                                <div class="form-group">
                                        <label>Mô tả sản phẩm</label>
                                        <textarea id="details" name="description" required class="form-control" rows="3"><%=product.description%></textarea>
                                        <script>
	                                        CKEDITOR.replace("details");
                                        </script>
                                    </div>
                                <button type="submit" name="sbm" class="btn btn-primary">Cập nhật</button>
                                <button type="reset" class="btn btn-default">Làm mới</button>
                            </div>
                        </form>
                        </div>
                    </div>
                </div><!-- /.col-->
            </div><!-- /.row -->
		
	</div>	<!--/.main-->	
<%-include("../layout/footer.ejs")%>